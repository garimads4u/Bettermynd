$(document).ready(function () {

    // start Additional method
    $.validator.addMethod("password_validation", function (value, element) {

        var numericReg = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{8,15}$/;
        return numericReg.test(value);
    }, "Password contains 8-15 characters at least 1 Uppercase, 1 Lowercase, 1 Digit and 1 Special Character");

    $.validator.addMethod("username_validation", function (value, element) {
        var numericReg = /^[A-Za-z0-9|\.\_\-]{4,18}$/;
        // var numericReg = /^[A-Za-z]+$/;
        //    var numericReg = /^[a-zA-Z'.,-]{0,150}$/;
        return numericReg.test(value);

    }, "Please enter Characters only.");


    $.validator.addMethod("email_valid", function (value, element) {
        //var numericReg = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        var numericReg = /^([A-Za-z]{1})([A-Za-z0-9-_.]{2,28})([A-Za-z0-9])+\@([a-zA-Z0-9]+\.)+(([a-zA-Z]{2,4}))\w?$/;
        return numericReg.test(value);
    }, "Please Enter valid email address");


    $.validator.addMethod("text_validation", function (value, element) {
        // var numericReg = /^[A-Za-z|\'|\s]+$/;
        var numericReg = /^[A-Za-z]+$/;
        //    var numericReg = /^[a-zA-Z'.,-]{0,150}$/;
        return numericReg.test(value);

    }, "Please enter Characters only.");

    $.validator.addMethod("title_validation", function (value, element) {
        var numericReg = /^[A-Za-z|\'|\s]+$/;
        // var numericReg = /^[A-Za-z]+$/;
        //    var numericReg = /^[a-zA-Z'.,-]{0,150}$/;
        return numericReg.test(value);

    }, "Please enter Characters only.");

    $.validator.addMethod("postcode", function (value, element) {
        if (value != "") {
            var numericReg = /^(?=.*\d)[a-zA-Z\d #,-]+$/;
            return numericReg.test(value);
        } else {
            return true;
        }
    }, "Zipcode contains 6-8 alpha numneric or digit only");

    $.validator.addMethod("notEqual", function (value) {
        return value !== $("#old").val();
    }, "Old password and new password must be different");



    $.validator.addMethod("address_field_validation", function (value, element) {
        //   var numericReg = /^[A-Za-z|\'|\s]+$/;
        if (value != "") {
            var numericReg = /^[a-zA-Z0-9\.\,\_\-\/\(\)\'\s]+$/;
            //    var numericReg = /^[a-zA-Z'.,-]{0,150}$/;
            return numericReg.test(value);
        }
        else {
            return true;
        }

    }, "Special characters not allowed.");
    $.validator.addMethod("coupon_percentage_validation", function (value, element) {
        if (value > 100) {
            return false;
        } else {
            return true;
        }
    }, "Discount percentage must be less then 100.");

    // Coupon Name Uniqueness validation

    jQuery.validator.addMethod("edi_validation", function (value, element, param) {
        var code = $('[name="page_content"]').summernote('code').replace(/[&]nbsp[;]|(<([^>]+)>)/gi, "").trim();
        // <p><br></p> is code generated by Summernote for empty content
        return (code !== '' && code !== '<p><br></p>' && code !== '<br>');
    }, "This field is required.");

    jQuery.validator.addMethod("note_editor", function (value, element, param) {
        var code = $('[name="notes_detail"]').summernote('code').replace(/[&]nbsp[;]|(<([^>]+)>)/gi, "").trim();
        // <p><br></p> is code generated by Summernote for empty content
        return (code !== '' && code !== '<p><br></p>' && code !== '<br>');
    }, "This field is required.");

    jQuery.validator.addMethod("mail_editor", function (value, element, param) {
        var code = $('[name="mail_template_content"]').summernote('code').replace(/[&]nbsp[;]|(<([^>]+)>)/gi, "").trim();
        return (code !== '' && code !== '<p><br></p>' && code !== '<br>');
    }, "This field is required.");

    $(".note-editor .note-editable").on('keyup', function () {
        var input_name = $('.note-editor').parents('.form-group').find('textarea').attr('name');
        var code = $('[name="' + input_name + '"]').summernote('code').replace(/[&]nbsp[;]|(<([^>]+)>)/gi, "").trim();
        if (code !== '' && code !== '<p><br></p>' && code !== '<br>') {
            $('.note-editor').removeClass('custom_err_show').addClass('valid');
            $('.note-editor').parents('.form-group').find('span.error').addClass('valid').text('');
        } else {
            $('.note-editor').removeClass('valid').addClass('custom_err_show');
            $('.note-editor').parents('.form-group').find('span.error').addClass('valid').text('This field is required.');
        }
    });
    $("#timeslot").on('change', function () {
        if ($(this).val()) {
            $(this).next('.btn-group').removeClass('custom_err_show').addClass('valid');
            $(this).parents('.form-group').find('span.error').addClass('valid').text('');
        } else {
            $(this).next('.btn-group').addClass('custom_err_show').removeClass('valid');
            $(this).parents('.form-group').find('span.error').removeClass('valid').text('This field is required.');
        }
    });
// change password form validation
    $("#change_password").validate({
        rules: {
            old: {
                required: true

            },
            new : {
                required: true,
                notEqual: true,
                password_validation: true,
            },
            new_confirm: {
                required: true,
                equalTo: "#new"
            }
        },
        messages: {
            new_confirm: {equalTo: "Password and Confirm Password doesn't match."}
        },
        errorPlacement: function (error, element) {
            var my = "";
            var at = "";

            if ($(window).width() < 800)
            {
                my = 'bottom right';
                at = 'top right';
            }
            else
            {
                my = 'bottom right';
                at = 'top right';
            }
            if (!error.is(':empty')) {
                $(element).not('.valid').qtip({
                    overwrite: false,
                    content: error,
                    show: 'focus',
                    hide: 'blur',
                    position: {
                        my: my,
                        at: at,
                        viewport: $(window),
                        adjust: {x: 0, y: 0}
                    },
                    style: {
                        classes: 'qtip-custom qtip-shadow',
                        tip: {
                            height: 6,
                            width: 11
                        }
                    }
                })
                        .qtip('option', 'content.text', error);
            }
            else {
                element.qtip('destroy');
            }
        },
        success: "valid"
    });

    var u_id = '';
    var id = '';


    $(document).on("click", ".college_status", function (e) {
//    $('.user_status').on('switchChange.bootstrapSwitch', function (e, data) {
        var that = $(this);
        e.preventDefault();
//        $(this).bootstrapSwitch('state', !data, true);
        id = $(this).attr('id');
        var status = $(this).data('status');
        status = status != '' && status == '1' ? 'deactivate' : 'activate';
        u_id = $(this).val();

        bootbox.confirm({
            buttons: {
                confirm: {
                    label: 'Yes, please'
                            //className: 'confirm-button-class'
                },
                cancel: {
                    label: 'No, thanks'
                            //className: 'cancel-button-class'
                }
            },
            message: 'Do you really want to ' + status + ' this profile?',
            callback: function (result) {
                if (result == true) {
                    if (document.getElementById(id).checked) {
                        status = '0';
                    }
                    else {
                        status = '1';
                    }
                    $.ajax({
                        url: SITE_URL + "sadmin/college_update_status",
                        data: 'user_id=' + u_id + '&status=' + status,
                        type: "POST",
                        success: function (data) {
                            $('#infoMessage').html('<p class="alert alert-success text-left">Status Updated Successfully.<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a></p>');
//                            $(".alert-success").fadeTo(2000, 500).slideUp(800, function () {
//                                $(".alert-success").alert('close');
//                            });
                            that.prop('checked', parseInt(status));
                            that.data('status', status);

                        },
                        error: function () {
                        }
                    });
                    //$('.switchery').trigger('click');

                }
            },
            title: 'Manage Account Status'
        });
    });

    $("#college_form").validate({
        rules: {
            user_email: {
                required: true,
                email_valid: true,
                remote: {
                    url: SITE_URL + "sadmin/email_availablity",
                    type: "POST",
                    data: {
                        user_email: function () {
                            return $('#college_form :input[name="user_email"]').val();
                        }
                    }
                }
            },
            first_name: {
                required: true,
                rangelength: [1, 32],
                text_validation: true,
            },
            last_name: {
                required: true,
                rangelength: [1, 32],
                text_validation: true,
            },
            college_name: {
                required: true,
                minlength: 3
            },
            college_address: {
                required: true,
                address_field_validation: true,
                minlength: 2
            },
            college_state: {
                required: true,
            },
            college_city: {
                required: true,
                //minlength: 3
            },
            college_office_no: {
                required: true,
            },
            college_zipcode: {
                required: true,
                minlength: 5,
                // postcode: true,
                //rangelength: [5, 8],
                zipcodeUS: true

            },
        },
        messages: {
            user_email: {
                remote: "Email already registered. ",
            },
        },
        errorPlacement: function (error, element) {
            var my = "";
            var at = "";

            if ($(window).width() < 800)
            {
                my = 'bottom right';
                at = 'top right';
            }
            else
            {
                my = 'bottom right';
                at = 'top right';
            }
            if (!error.is(':empty')) {
                $(element).not('.valid').qtip({
                    overwrite: false,
                    content: error,
                    show: 'focus',
                    hide: 'blur',
                    position: {
                        my: my,
                        at: at,
                        viewport: $(window),
                        adjust: {x: 0, y: 0}
                    },
                    style: {
                        classes: 'qtip-custom qtip-shadow',
                        tip: {
                            height: 6,
                            width: 11
                        }
                    }
                })
                        .qtip('option', 'content.text', error);
            }
            else {
                element.qtip('destroy');
            }
        },
        success: "valid"
    });



    $(".changepassword").click(function (event) {
        var uid = $(this).data('id');
        var user_email = $(this).data('email');

        bootbox.confirm({
            buttons: {
                confirm: {
                    label: 'Yes, please'
                },
                cancel: {
                    label: 'No, thanks'
                }
            },
            message: 'Do you want to send change password request on <a href="javascript:void(0)">' + user_email + '</a>',
            callback: function (result) {
                if (result == true) {
                    $.ajax({
                        url: SITE_URL + "sadmin/change_password_request",
                        data: 'user_id=' + uid,
                        type: "POST",
                        success: function (data) {
                            if (data == '1') {
                                $('#infoMessage').html('');
                                $('#infoMessage').html('<p class="alert alert-danger text-left">Email id not found in our database! Try again later.</p>');
                            } else if (data == '2') {
                                $('#infoMessage').html('');
                                $('#infoMessage').html('<p class="alert alert-success text-left">We have sent an email to registered e-mail address of company regarding instructions for changing password.</p>');
                            } else {
                                $('#infoMessage').html('');
                                $('#infoMessage').html('<p class="alert alert-danger text-left">Error! Try again later.</p>');
                            }

                        },
                        error: function () {
                        }
                    });

                }
            },
            title: 'Password Change Request'
        });
    });
    $('#biography').keypress(function () {
        var char = $(this).val();
        if (char.length >= 0) {
            var c = 500 - char.length;
            $('#charCount').text(c);

        }
    });


    $(document).on("click", '.template_status', function (e) {
        e.preventDefault();

        id = $(this).data('id');
        var status = $(this).data('status');

        if (status == "DeActivate") {
            var status1 = "deactivate";
        }
        else {
            var status1 = "activate";
        }
        bootbox.confirm({
            buttons: {
                confirm: {
                    label: 'Yes, please'
                },
                cancel: {
                    label: 'No, thanks'
                }
            },
            message: 'Do you really want to ' + status1 + ' mail template?',
            callback: function (result) {
                if (result == true) {

                    $.ajax({
                        url: SITE_URL + "sadmin/update_template_status/" + id + "/" + status,
                        data: 'mail_template_id=' + id + '&mail_template_status=' + status,
                        type: "POST",
                        success: function (data) {

                            window.location.href = "";
                        },
                        error: function () {
                        }
                    });
                }
            },
            title: 'Update Template Status'
        });
    });
    $("#template_frm").validate({
        ignore: [],
        rules: {
            template_name: {
                required: true

            },
            template_subject: {
                required: true

            },
            mail_template_content: {
                mail_editor: true
            }

        },
        errorPlacement: function (error, element) {
            var my = "";
            var at = "";

            if ($(window).width() < 800)
            {
                my = 'bottom right';
                at = 'top right';
            }
            else
            {
                my = 'bottom right';
                at = 'top right';
            }
            if (!error.is(':empty')) {
                $(element).parent().find('span.error').remove();
                $(element).parent().append(error);
                if (element.attr("name") == "mail_template_content") {
                    $(element).next('div').addClass('custom_err_show');
                }
            }
            else {
                element.qtip('destroy');
                if (element.attr("name") == "mail_template_content") {
                    $(element).next('div').removeClass('custom_err_show');
                }
            }
        },
        success: "valid"
    });
    $("#cms_template_frm").validate({
        ignore: [],
        rules: {
            page_title: {
                required: true,
                title_validation: true,
                minlength: 3,
                maxlength: 50

            },
            page_content: {
                edi_validation: true
            }
            /*page_content: {
             required: function () {
             CKEDITOR.instances.page_content.updateElement();
             }
             }*/

        },
        messages: {
            page_title: {minlength: "Title should be between 3 to 50 characters.",
                maxlength: "Title should be between 3 to 50 characters."},
        },
        errorPlacement: function (error, element) {
            var my = "";
            var at = "";

            if ($(window).width() < 800)
            {
                my = 'bottom right';
                at = 'top right';
            }
            else
            {
                my = 'bottom right';
                at = 'top right';
            }
            if (!error.is(':empty')) {
                $(element).parent().find('span.error').remove();
                $(element).parent().append(error);
            }
            else {
                element.qtip('destroy');
            }
        },
        success: "valid"
    });

    $("#welcomee_frm").validate({
        ignore: [],
        rules: {
            college_id: {
                required: true

            },
            notes_detail: {
                note_editor: true

            },
            upload_image: {
                required: false,
                accept: "image/jpg,image/jpeg,image/png,image/gif",
                filesize: 1048576 * 2
            },
            logo_image: {
                required: false,
                accept: "image/jpg,image/jpeg,image/png,image/gif",
                filesize: 1048576 * 2
            },
            logocover_image: {
                required: false,
                accept: "image/jpg,image/jpeg,image/png,image/gif",
                filesize: 1048576 * 2
            }
        },
        messages: {
            upload_image: {
                accept: 'Only image type jpg/png/jpeg/gif is allowed',
                filesize: "Upload image must be less than 2MB",
                multiple: true
            },
            logo_image: {
                accept: 'Only image type jpg/png/jpeg/gif is allowed',
                filesize: "Logo image must be less than 2MB",
                multiple: true
            },
            logocover_image: {
                accept: 'Only image type jpg/png/jpeg/gif is allowed',
                filesize: "Logo cover image must be less than 2MB",
                multiple: true
            }
        },
        errorPlacement: function (error, element) {
            var my = "";
            var at = "";

            if ($(window).width() < 800)
            {
                my = 'bottom right';
                at = 'top right';
            }
            else
            {
                my = 'bottom right';
                at = 'top right';
            }
            if (!error.is(':empty')) {
                $(element).parent().find('span.error').remove();
                $(element).parent().append(error);
                if (element.attr("name") == "notes_detail") {
                    $(element).next('div').addClass('custom_err_show');
                }
                if (element.attr("name") == "upload_image") {
                    $(element).parents('.uploadimageDiv').find('.noneditable').addClass('error');
                }
                if (element.attr("name") == "logo_image") {
                    $(element).parents('.logoimageDiv').find('.noneditable').addClass('error');
                }
                if (element.attr("name") == "logocover_image") {
                    $(element).parents('.logocoverimageDiv').find('.noneditable').addClass('error');
                }
            }
            else {
                element.qtip('destroy');
                if (element.attr("name") == "notes_detail") {
                    $(element).next('div').removeClass('custom_err_show');
                }
                if (element.attr("name") == "upload_image") {
                    $(element).parents('.uploadimageDiv').find('.noneditable').removeClass('error');
                }
                if (element.attr("name") == "logo_image") {
                    $(element).parents('.logoimageDiv').find('.noneditable').removeClass('error');
                }
                if (element.attr("name") == "logocover_image") {
                    $(element).parents('.logocoverimageDiv').find('.noneditable').removeClass('error');
                }
            }
        },
        success: "valid"
    });

    $("#bettermynd_note_frm").validate({
        ignore: [],
        rules: {
            note_title: {
                required: true

            },
            notes_detail: {
                note_editor: true

            }
        },
        errorPlacement: function (error, element) {
            var my = "";
            var at = "";

            if ($(window).width() < 800)
            {
                my = 'bottom right';
                at = 'top right';
            }
            else
            {
                my = 'bottom right';
                at = 'top right';
            }
            if (!error.is(':empty')) {
                $(element).parent().find('span.error').remove();
                $(element).parent().append(error);
                if (element.attr("name") == "notes_detail") {
                    $(element).next('div').addClass('custom_err_show');
                }
            }
            else {
                element.qtip('destroy');
                if (element.attr("name") == "notes_detail") {
                    $(element).next('div').removeClass('custom_err_show');
                }
            }
        },
        success: "valid"
    });

    $(document).on("click", ".package_status", function (e) {
        e.preventDefault();
        id = $(this).data('id');
        var pltype = $(this).data('pltype');

        var status = $(this).data('status');
        if (status == "DeActivate") {
            var status1 = "deactivate";
        }
        else {
            var status1 = "activate";
        }

        bootbox.confirm({
            buttons: {
                confirm: {
                    label: 'Yes, please'
                },
                cancel: {
                    label: 'No, thanks'
                }
            },
            message: 'Do you really want to ' + status1 + ' membership package?',
            callback: function (result) {
                if (result == true) {

                    $.ajax({
                        url: SITE_URL + "sadmin/update_package_status/" + id + "/" + status,
                        data: 'mail_template_id=' + id + '&mail_template_status=' + status,
                        type: "POST",
                        success: function (data) {

                            window.location.href = SITE_URL + "sadmin/membershippackages/" + pltype;
                        },
                        error: function () {
                        }
                    });
                }
            },
            title: 'Update Template Status'
        });
    });
    $("#plan_form").validate({
        ignore: [],
        rules: {
            package_amount: {
                required: true

            },
            'membership_package[]': {
                required: true

            },
            'package_mode[]': {
                required: true

            }

        },
        errorPlacement: function (error, element) {
            var my = "";
            var at = "";

            if ($(window).width() < 800)
            {
                my = 'bottom right';
                at = 'top right';
            }
            else
            {
                my = 'bottom right';
                at = 'top right';
            }
            if (!error.is(':empty')) {
                $(element).not('.valid').qtip({
                    overwrite: false,
                    content: error,
                    show: 'focus',
                    hide: 'blur',
                    position: {
                        my: my,
                        at: at,
                        viewport: $(window),
                        adjust: {x: 0, y: 0}
                    },
                    style: {
                        classes: 'qtip-custom qtip-shadow',
                        tip: {
                            height: 6,
                            width: 11
                        }
                    }
                })
                        .qtip('option', 'content.text', error);
            }
            else {
                element.qtip('destroy');
            }
        },
        success: "valid"
    });

    $.validator.addMethod("coupon_code_name_validation", function (value, element) {
        var numericReg = /^[a-zA-Z0-9\-\s]+$/;

        return numericReg.test(value);
    }, "Coupon Code Must Be 3-15 Alphanumerice Characters.");
    $.validator.addMethod("notNumber", function (value, element, param) {
        var reg = /^[0-9]*$/;
        if (reg.test(value)) {
            return false;
        } else {
            return true;
        }
    }, "Coupon Code Must Be 3-15 Alphanumerice Characters.");

    // Coupon Code Form Validations
    $("#coupon_form").validate({
        ignore: [],
        rules: {
            'coupon_code': {
                minlength: 3,
                maxlength: 15,
                required: true,
                coupon_code_name_validation: true,
                notNumber: true,
            },
            'coupon_start_date': {
                required: true,
                date: true


            },
            'coupon_end_date': {
                required: true,
                date: true



            },
            discount_percentage: {
                required: {
                    depends: function () {
                        if ($('.cccoderadio:checked').val() == 'AMOUNT')
                            return true;
                    }
                },
                coupon_percentage_validation: true,
                number: true
            },
            coupon_free_trial: {
                required: {
                    depends: function () {
                        if ($('.cccoderadio:checked').val() == 'DAYS')
                            return true;
                    }
                },
                digits: true
            },
            coupon_code_desc: {
                minlength: 5
            }

        },
        messages: {
            'coupon_start_date': {greaterThanToday: 'Start Date Must Be Greater Then Today.'},
            'discount_percentage': {number: 'Please enter digit only.'},
        },
        success: "valid"
    });


    $(document).on("click", ".deletecoupon", function (e) {
        e.preventDefault();
        id = $(this).data('id');
        bootbox.confirm({
            buttons: {
                confirm: {
                    label: 'Yes, please'
                },
                cancel: {
                    label: 'No, thanks'
                }
            },
            message: 'Do you really want to delete this discount coupon?',
            callback: function (result) {
                if (result == true) {

                    $.ajax({
                        url: SITE_URL + "sadmin/deletecoupons/" + id,
                        data: 'mail_template_id=' + id,
                        type: "POST",
                        success: function (data) {

                            window.location.href = SITE_URL + "sadmin/discountcoupons";
                        },
                        error: function () {
                        }
                    });
                }
            },
            title: 'Delete discount coupon'
        });
    });

    $("#plan_form").validate({
        ignore: [],
        rules: {
            package_amount: {
                required: true

            },
            'membership_package[]': {
                required: true

            },
            'package_mode[]': {
                required: true

            }

        },
        errorPlacement: function (error, element) {
            var my = "";
            var at = "";

            if ($(window).width() < 800)
            {
                my = 'bottom right';
                at = 'top right';
            }
            else
            {
                my = 'bottom right';
                at = 'top right';
            }
            if (!error.is(':empty')) {
                $(element).not('.valid').qtip({
                    overwrite: false,
                    content: error,
                    show: 'focus',
                    hide: 'blur',
                    position: {
                        my: my,
                        at: at,
                        viewport: $(window),
                        adjust: {x: 0, y: 0}
                    },
                    style: {
                        classes: 'qtip-custom qtip-shadow',
                        tip: {
                            height: 6,
                            width: 11
                        }
                    }
                })
                        .qtip('option', 'content.text', error);
            }
            else {
                element.qtip('destroy');
            }
        },
        success: "valid"
    });
    $(document).on("click", ".coupon_status", function (e) {
        e.preventDefault();
        id = $(this).data('id');


        var status = $(this).data('status');
        if (status == "1") {
            var status1 = "activate";
        }
        else {
            var status1 = "deactivate";
        }

        bootbox.confirm({
            buttons: {
                confirm: {
                    label: 'Yes, please'
                            //className: 'confirm-button-class'
                },
                cancel: {
                    label: 'No, thanks'
                            //className: 'cancel-button-class'
                }
            },
            message: 'Do you really want to ' + status1 + ' this discount coupon?',
            callback: function (result) {
                if (result == true) {

                    $.ajax({
                        url: SITE_URL + "sadmin/update_discount_coupon_status/" + id + "/" + status,
                        data: 'mail_template_id=' + id + '&mail_template_status=' + status,
                        type: "POST",
                        success: function (data) {

                            window.location.href = SITE_URL + "sadmin/discountcoupons";
                        },
                        error: function () {
                        }
                    });
                    //$('.switchery').trigger('click');

                }
            },
            title: 'Update Template Status'
        });
    });
    jQuery.validator.addMethod("greaterThan",
            function (value, element, params) {

                var startDate = new Date($('#coupon_start_date').val().replace(/\-/g, '/'));
                var currDate = new Date();
                var endDate = new Date($('#coupon_end_date').val().replace(/\-/g, '/'));
                if (currDate > startDate || currDate > endDate) {
                    return false;
                }
                if (startDate > endDate) {
                    return false;
                }
                else {
                    return true;
                }

            });



    $.validator.addMethod("state_name_validation", function (value, element) {
        var reg = /^[a-zA-Z' ]*$/;

        return reg.test(value);
    }, "State Name Must Be 3-25 Characters.");

    $.validator.addMethod("state_code_validation", function (value, element) {
        var reg = /^[A-Za-z]*$/;

        return reg.test(value);
    }, "State Code Must Be 2-4 Characters.");

    // state Form Validations
    $("#state_form").validate({
        ignore: [],
        rules: {
            'state': {
                minlength: 3,
                maxlength: 25,
                required: true,
                state_name_validation: true
            },
            'state_code': {
                minlength: 2,
                maxlength: 4,
                required: true,
                state_code_validation: true
            }
        },
        success: "valid"
    });

    $(document).on("click", ".deletestate", function (e) {
        e.preventDefault();
        id = $(this).data('id');

        bootbox.confirm({
            buttons: {
                confirm: {
                    label: 'Yes, please'
                            //className: 'confirm-button-class'
                },
                cancel: {
                    label: 'No, thanks'
                            //className: 'cancel-button-class'
                }
            },
            message: 'Do you really want to delete this state?',
            callback: function (result) {
                if (result == true) {

                    $.ajax({
                        url: SITE_URL + "sadmin/deletestates/" + id,
                        data: 'state_id=' + id,
                        type: "POST",
                        success: function (data) {

                            window.location.href = SITE_URL + "sadmin/managestates";
                        },
                        error: function () {
                        }
                    });
                    //$('.switchery').trigger('click');

                }
            },
            title: 'Delete State'
        });
    });

    //site settings validation
    $.validator.addMethod("tax_percentage_validation", function (value, element) {
        //var reg = /^(100(\.0{1,2})?|([0-9]?[0-9](\.[0-9]{1,4})))$/;
        var reg = /^(100(\.0{1,2})?|[1-9]?\d(\.\d{1,2})?)$/;
        return reg.test(value);
    }, "Tax percentage must be a float value.");

    $.validator.addMethod("alphanumeric_validation", function (value, element) {
        var reg = /^[ A-Za-z0-9_'@,./#&+-]*$/;

        return reg.test(value);
    }, "Please enter Only Characters.");

    // state Form Validations
    $("#site_setting_form").validate({
        ignore: [],
        rules: {
            'site_title': {
                minlength: 3,
                maxlength: 255,
                required: true,
                alphanumeric_validation: true
            },
            'tax_percentage': {
                minlength: 1,
                maxlength: 16,
                required: true,
                tax_percentage_validation: true
            },
            'meta_keywords': {
                minlength: 3,
                maxlength: 1000,
                required: true,
                alphanumeric_validation: true
            },
            'meta_description': {
                minlength: 3,
                maxlength: 1000,
                required: true,
                alphanumeric_validation: true
            },
        },
        success: "valid"
    });



    var youtubePattern = /^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;
    jQuery.validator.addMethod("youtubeVideo", function (value) {
        return youtubePattern.test(value);
    }, "Must be a valid Youtube video");



    // support video Form Validations
    $("#video_form").validate({
        ignore: [],
        rules: {
            'title': {
                minlength: 3,
                required: true,
            },
            'url': {
                minlength: 2,
                required: true,
                youtubeVideo: true
            }
        },
        errorPlacement: function (error, element) {
            var my = "";
            var at = "";

            if ($(window).width() < 800)
            {
                my = 'bottom right';
                at = 'top right';
            }
            else
            {
                my = 'bottom right';
                at = 'top right';
            }
            if (!error.is(':empty')) {
                $(element).not('.valid').qtip({
                    overwrite: false,
                    content: error,
                    show: 'focus',
                    hide: 'blur',
                    position: {
                        my: my,
                        at: at,
                        viewport: $(window),
                        adjust: {x: 0, y: 0}
                    },
                    style: {
                        classes: 'qtip-custom qtip-shadow',
                        tip: {
                            height: 6,
                            width: 11
                        }
                    }
                })
                        .qtip('option', 'content.text', error);
            }
            else {
                element.qtip('destroy');
            }
        },
        success: "valid"
    });

    $(document).on("click", ".deletevideo", function (e) {
        e.preventDefault();
        id = $(this).data('id');

        bootbox.confirm({
            buttons: {
                confirm: {
                    label: 'Yes, please'
                            //className: 'confirm-button-class'
                },
                cancel: {
                    label: 'No, thanks'
                            //className: 'cancel-button-class'
                }
            },
            message: 'Do you really want to delete this video?',
            callback: function (result) {
                if (result == true) {

                    $.ajax({
                        url: SITE_URL + "sadmin/deletesupport_video/" + id,
                        data: 'state_id=' + id,
                        type: "POST",
                        success: function (data) {

                            window.location.href = SITE_URL + "sadmin/managevideos";
                        },
                        error: function () {
                        }
                    });
                    //$('.switchery').trigger('click');

                }
            },
            title: 'Delete Support Video'
        });
    });


    $(document).on("click", '.supportvideo_status', function (e) {
        e.preventDefault();

        id = $(this).data('id');
        var status = $(this).data('status');

        if (status == "DeActivate") {
            var status1 = "deactivate";
        }
        else {
            var status1 = "activate";
        }
        bootbox.confirm({
            buttons: {
                confirm: {
                    label: 'Yes, please'
                },
                cancel: {
                    label: 'No, thanks'
                }
            },
            message: 'Do you really want to ' + status1 + ' support video?',
            callback: function (result) {
                if (result == true) {

                    $.ajax({
                        url: SITE_URL + "sadmin/update_supportvideo_status/" + id + "/" + status,
                        data: 'video_id=' + id + '&video_status=' + status,
                        type: "POST",
                        success: function (data) {

                            window.location.href = "";
                        },
                        error: function () {
                        }
                    });
                }
            },
            title: 'Update Support Video Status'
        });
    });

    $(document).on("click", '.training_status', function (e) {
        e.preventDefault();

        id = $(this).data('id');
        var status = $(this).data('status');

        if (status == "DeActivate") {
            var status1 = "deactivate";
        }
        else {
            var status1 = "activate";
        }
        bootbox.confirm({
            buttons: {
                confirm: {
                    label: 'Yes, please'
                },
                cancel: {
                    label: 'No, thanks'
                }
            },
            message: 'Do you really want to ' + status1 + ' training?',
            callback: function (result) {
                if (result == true) {

                    $.ajax({
                        url: SITE_URL + "sadmin/update_training_status/" + id + "/" + status,
                        data: 'training_id=' + id + '&training_status=' + status,
                        type: "POST",
                        success: function (data) {

                            window.location.href = "";
                        },
                        error: function () {
                        }
                    });
                }
            },
            title: 'Update Training Status'
        });
    });
    $(document).on("click", ".deltraining", function (e) {
        e.preventDefault();
        id = $(this).data('id');

        bootbox.confirm({
            buttons: {
                confirm: {
                    label: 'Yes, please'
                            //className: 'confirm-button-class'
                },
                cancel: {
                    label: 'No, thanks'
                            //className: 'cancel-button-class'
                }
            },
            message: 'Do you really want to delete this training?',
            callback: function (result) {
                if (result == true) {

                    $.ajax({
                        url: SITE_URL + "sadmin/delete_training/" + id,
                        data: 'training_id=' + id,
                        type: "POST",
                        success: function (data) {

                            window.location.href = SITE_URL + "sadmin/trainings";
                        },
                        error: function () {
                        }
                    });
                    //$('.switchery').trigger('click');

                }
            },
            title: 'Delete Training'
        });
    });
});
$(document).ready(function () {
    $("#addtraingingform").validate({
        ignore: [],
        rules: {
            tstep_title: {
                required: true,
                minlength: 3,
                maxlength: 50
            },
            'ts_files[]': {
                extension: "gif|jpg|png|pdf|jpeg|zip|doc|docx|rtf|txt"
            }

        },
        messages: {
            tstep_title: {
                required: "Please enter your page title",
                minlength: "Your page title must be at least 3 characters long",
                maxlength: "Your page title must be less than 50 characters long"
            },
            description: {
                required: "Please enter your Description Content."
            },
            'ts_files[]': {
                extension: 'file must be of gif,jpg,png,pdf,jpeg,zip,doc,docx,rtf,txt',
                accept: 'file must be of gif,jpg,png,pdf,jpeg,zip,doc,docx,rtf,txt'
            }
        },
        errorPlacement: function (error, element) {
            if (element.attr("name") == "description") {
                error.insertBefore("textarea#description");
            } else {
                var my = "";
                var at = "";

                if ($(window).width() < 800)
                {
                    my = 'bottom right';
                    at = 'top right';
                }
                else
                {
                    my = 'bottom right';
                    at = 'top right';
                }
                if (!error.is(':empty')) {
                    $(element).not('.valid').qtip({
                        overwrite: false,
                        content: error,
                        show: 'focus',
                        hide: 'blur',
                        /*
                         hide: false,
                         show: {
                         event: false,
                         ready: true
                         },
                         */
                        position: {
                            my: my,
                            at: at,
                            viewport: $(window),
                            adjust: {x: 0, y: 0}
                        },
                        style: {
                            classes: 'qtip-custom qtip-shadow',
                            tip: {
                                height: 6,
                                width: 11
                            }
                        }
                    })
                            .qtip('option', 'content.text', error);
                }
                else {
                    element.qtip('destroy');
                }
            }
        },
        success: "valid"
    });
});

$(document).ready(function () {
    $.validator.setDefaults({ignore: ":hidden:not(.chosen-select)"});
    $.validator.addMethod("zipcodeUS", function (value, element) {
        return this.optional(element) || /^\d{5}(?:-\d{4})?$/.test(value)
    }, "Pease enter 5 or 9 digit zip code. Eg. 12345-1234 or 12345");
    $.validator.addMethod("password_validation", function (value, element) {
        var numericReg = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{8,15}$/;
        return numericReg.test(value);
    }, "Password contains 8-15 characters at least 1 Uppercase, 1 Lowercase, 1 Digit and 1 Special Character");
    $.validator.addMethod("username_validation", function (value, element) {
        var numericReg = /^([a-zA-Z])[a-zA-z0-9\._-]{2,14}[A-Za-z0-9]$/;
        return numericReg.test(value);
    }, "Username should be between 4 to 15  alphanumeric characters.");
    $.validator.addMethod("email_valid", function (value, element) {
        var numericReg = /^([A-Za-z]{1})([A-Za-z0-9-_.]{2,100})([A-Za-z0-9])+\@([a-zA-Z0-9]+\.)+(([a-zA-Z]{2,4}))\w?$/;
        return numericReg.test(value);
    }, "Please Enter valid email address");
    $.validator.addMethod("text_validation", function (value, element) {
        var numericReg = /^[A-Za-z]+$/;
        return numericReg.test(value);
    }, "Please enter Characters only.");
    $.validator.addMethod("postcode", function (value, element) {
        var numericReg = /^(?=.*\d)[a-zA-Z\d #,-]+$/;
        return numericReg.test(value);
    }, "Postcode contains 6-8 alpha numneric or digit only");
    $.validator.addMethod("numeric_validation", function (value, element) {
        var numericReg = /^[0-9]+$/;
        return numericReg.test(value);
    }, "Please enter numbers only.");
    $.validator.addMethod("text_numeric_validation", function (value, element) {
        var numericReg = /^[A-Za-z0-9_-]+$/;
        return numericReg.test(value);
    }, "Please enter Characters , numeric and special character (-,_)allowed.");
    $.validator.addMethod("phonenumber_masking", function (value, element) {
        var numericReg = /^[0-9][0-9][0-9]-[0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]$/;
        return numericReg.test(value);
    }, "Please enter valid mobile number");
    $.validator.addMethod('filesize', function (value, element, param) {
        return this.optional(element) || (element.files[0].size <= param)
    }, "Large file uploaded.");
    //provider update validation
    $("#updatePatientProfile").validate({
        ignore: [],
        rules: {
            first_name: {
                required: true,
                rangelength: [1, 32],
                text_validation: true,
            },
            last_name: {
                required: true,
                rangelength: [1, 32],
                text_validation: true,
            },
            dob: {
                required: true
            },
            address: {
                required: true
            },
            city: {
                required: true
            },
            state: {
                required: true
            },
            timezone: {
                required: true
            },
            zipcode: {
                required: true,
                minlength: 5,
                zipcodeUS: true
            },
            ethnicity: {
                required: true,
            },
            mobile_no: {
                required: true,
                minlength: 12,
                phonenumber_masking: true
            },
            gender: {
                required: true,
            },
            profile_image: {
                required: false,
                accept: "image/jpg,image/jpeg,image/png,image/gif",
                filesize: 1048576 * 2

            }
        },
        messages: {
            mobile_phone: {
                minlength: "Please enter 10 digit mobile number. ",
            },
            profile_image: {
                accept: 'Only image type jpg/png/jpeg/gif is allowed',
                filesize: "Profile image must be less than 2MB"
            }
        },
        errorPlacement: function (error, element) {
            var my = "";
            var at = "";
            if ($(window).width() < 800) {
                my = 'bottom right';
                at = 'top right';
            } else {
                my = 'bottom right';
                at = 'top right';
            }
            if (!error.is(':empty')) {
                $(element).not('.valid').qtip({
                    overwrite: false,
                    content: error,
                    show: 'focus',
                    hide: 'blur',
                    position: {
                        my: my,
                        at: at,
                        viewport: $(window),
                        adjust: {
                            x: 0,
                            y: 0
                        }
                    },
                    style: {
                        classes: 'qtip-custom qtip-shadow',
                        tip: {
                            height: 6,
                            width: 11
                        }
                    }
                }).qtip('option', 'content.text', error);
                if (element.attr("name") == "profile_image") {
                    $(element).parents('.profileimageDiv').find('.noneditable').addClass('error');
                }
                if (element.attr("name") == "timezone") {
                    $(element).next('div').addClass('qtip-custom qtip-shadow');
                }
                if (element.attr("name") == "state") {
                    $(element).next('div').addClass('qtip-custom qtip-shadow');
                }
            } else {
                if (element.attr("name") == "profile_image") {
                    $(element).parents('.profileimageDiv').find('.noneditable').removeClass('error');
                }
                element.qtip('destroy');
            }
        },
        /*submitHandler: function (form) {
            form.submit();
        },*/
        success: "valid"
    });
    $("#paymentform").validate({
        rules: {
            card_number: {
                required: true,
                creditcard: true,
                minlength: 13,
                maxlength: 25
            },
            expiration_date: {
                required: true,
                minlength: 9
            },
            cvv_code: {
                required: true
            },
            address: {
                required: true
            },
            zip_code: {
                required: true,
                rangelength: [5, 8],
                postcode: true
            }
        },
        messages: {
            expiration_date: {
                minlength: "Expiration date must be in MM/YYYY format."
            },
            zip_code: {
                rangelength: "Zipcode contains 5-8 alpha numneric or digit only."
            }
        },
        errorPlacement: function (error, element) {
            var my = "";
            var at = "";
            if ($(window).width() < 800) {
                my = 'bottom right';
                at = 'top right';
            } else {
                my = 'bottom right';
                at = 'top right';
            }
            if (!error.is(':empty')) {
                $(element).not('.valid').qtip({
                    overwrite: false,
                    content: error,
                    show: 'focus',
                    hide: 'blur',
                    position: {
                        my: my,
                        at: at,
                        viewport: $(window),
                        adjust: {
                            x: 0,
                            y: 0
                        }
                    },
                    style: {
                        classes: 'qtip-custom qtip-shadow',
                        tip: {
                            height: 6,
                            width: 11
                        }
                    }
                }).qtip('option', 'content.text', error);
            } else {
                element.qtip('destroy');
            }
        },
        submitHandler: function (form) {
            $("#signup_btn").attr("disabled", true);
            $('#loading_image').removeClass('hide').addClass('show');
            Stripe.card.createToken({
                number: $('#card_number').val(),
                cvc: $('#cvv_code').val(),
                exp_month: '02',
                exp_year: '2017',
                name: $('#first_name').val() + ' ' + $('#last_name').val(),
                address_line1: $('#address').val(),
                address_city: 'test',
                address_zip: $('#zip_code').val(),
                // address_state: $('.state').val(),
                // address_country: $('.country').val()
            }, stripeResponseHandler);
        },
        success: "valid"
    });

    $("#send_flashmessage_form").validate({
        ignore: [],
        rules: {
            flashmessage: {
                required: true,
                minlength: 10,
                maxlength: 500
            },
            'college_id[]': {
                required: true
            }
        },
        messages: {
        },
        errorPlacement: function (error, element) {
            var my = "";
            var at = "";
            if ($(window).width() < 800) {
                my = 'bottom right';
                at = 'top right';
            } else {
                my = 'bottom right';
                at = 'top right';
            }
            if (!error.is(':empty')) {
                $(element).not('.valid').qtip({
                    overwrite: false,
                    content: error,
                    show: 'focus',
                    hide: 'blur',
                    position: {
                        my: my,
                        at: at,
                        viewport: $(window),
                        adjust: {
                            x: 0,
                            y: 0
                        }
                    },
                    style: {
                        classes: 'qtip-custom qtip-shadow',
                        tip: {
                            height: 6,
                            width: 11
                        }
                    }
                }).qtip('option', 'content.text', error);
                if (element.attr("name") == "college_id[]") {
                    $(element).next('div').addClass('qtip-custom qtip-shadow');
                }
            } else {
                element.qtip('destroy');
            }
        },
        submitHandler: function (form) {
            form.submit();
        },
        success: "valid"
    });

    $("#avail_form").validate({
        rules: {
            startdate: {
                required: true
            },
            enddate: {
                required: true
            },
            'timeslot[]': {
                required: true
            }
        },
        errorPlacement: function (error, element) {
            var my = "";
            var at = "";
            if ($(window).width() < 800) {
                my = 'bottom right';
                at = 'top right';
            } else {
                my = 'bottom right';
                at = 'top right';
            }
            if (!error.is(':empty')) {
                $(element).parent().find('span.error').remove();
                $(element).parents('.form-group').append(error);
                /*$(element).not('.valid').qtip({
                 overwrite: false,
                 content: error,
                 show: 'focus',
                 hide: 'blur',
                 position: {
                 my: my,
                 at: at,
                 viewport: $(window),
                 adjust: {
                 x: 0,
                 y: 0
                 }
                 },
                 style: {
                 classes: 'qtip-custom qtip-shadow',
                 tip: {
                 height: 6,
                 width: 11
                 }
                 }
                 }).qtip('option', 'content.text', error);*/
                if (element.attr("name") == "timeslot[]") {
                    $(element).next('div').addClass('custom_err_show');
                }
            } else {
                element.qtip('destroy');
            }
        },
        success: "valid"
    });

    $("#changePasswordFrm").validate({
        rules: {
            new : {
                required: true,
                password_validation: true
            },
            new_confirm: {
                required: true,
                equalTo: "#new",
                password_validation: true
            }
        },
        messages: {
            new_confirm: {
                equalTo: "New Password and Confirm New Password should be same.",
            }
        },
        errorPlacement: function (error, element) {
            var my = "";
            var at = "";
            if ($(window).width() < 800) {
                my = 'bottom right';
                at = 'top right';
            } else {
                my = 'bottom right';
                at = 'top right';
            }
            if (!error.is(':empty')) {
                $(element).not('.valid').qtip({
                    overwrite: false,
                    content: error,
                    show: 'focus',
                    hide: 'blur',
                    position: {
                        my: my,
                        at: at,
                        viewport: $(window),
                        adjust: {
                            x: 0,
                            y: 0
                        }
                    },
                    style: {
                        classes: 'qtip-custom qtip-shadow',
                        tip: {
                            height: 6,
                            width: 11
                        }
                    }
                }).qtip('option', 'content.text', error);
            } else {
                element.qtip('destroy');
            }
        },
        success: "valid"
    });
});


function user_detail(url, user_id) {
    var modal_id = "#userDetailModal" + user_id;
    $.ajax({
        url: url,
        data: {},
        type: "GET",
        success: function (data) {
            $("#userDetail").html(data);
            $(modal_id).modal('show');
        },
        error: function () {
        }
    });
}